<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Verify Email</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4">
    <div class="container" style="max-width:560px">
        <h3 class="mb-3">Verifying your email…</h3>
        <div id="msg" class="alert alert-info">Please wait…</div>
        <a href="index.html" class="btn btn-primary mt-2">Back to Home</a>
    </div>

    <script>
        ( async function ()
        {
            const API = 'http://localhost:3001';
            const params = new URLSearchParams( location.search );
            const token = params.get( 'token' );
            const box = document.getElementById( 'msg' );
            if ( !token ) { box.className = 'alert alert-danger'; box.textContent = 'Missing token.'; return; }
            try
            {
                const r = await fetch( API + '/api/auth/verify?token=' + encodeURIComponent( token ) );
                const j = await r.json();
                if ( j.ok ) { box.className = 'alert alert-success'; box.textContent = 'Email verified! You can now log in.'; }
                else { box.className = 'alert alert-danger'; box.textContent = j.error || 'Verification failed.'; }
            } catch
            {
                box.className = 'alert alert-danger'; box.textContent = 'Network error';
            }
        } )();
    </script>
</body>

</html>